实验六 循迹模块的实现

一、实验目的

1. 掌握循迹模块硬件电路的焊接与调试方法。
2. 深入理解循迹模块电路的工作原理，能够独立完成电路的设计与实现。
3. 学会分析和解决循迹模块在实际调试过程中遇到的各种问题。
4. 验证传感器在不同地面条件下的工作特性，确保循迹功能的可靠性。

二、实验器材

- STC89C52RC单片机核心板 × 1
- TCRT5000红外循迹传感器模块 × 5个
- 10kΩ电阻 × 10个
- 4.7kΩ电阻 × 5个
- LED指示灯 × 5个（用于指示传感器状态）
- 万用板（洞洞板） × 1
- 杜邦线若干（公母头、母母头）
- 电烙铁、焊锡丝、镊子等焊接工具
- 可调直流电源（5V） × 1
- 万用表 × 1
- 黑色电工胶带（用于制作测试轨道）
- 白色硬纸板（用于制作测试地面）

三、分工情况

- 张旭阳：负责循迹模块硬件电路的焊接、电路原理分析以及硬件调试。
- 高佳愿：负责传感器信号测试、问题排查与解决、实验数据记录与报告撰写。

四、实验内容及步骤

1、焊接硬件电路

（1）电路设计

循迹模块电路主要由5个TCRT5000红外传感器组成，每个传感器电路包括：
- TCRT5000传感器：红外发射管和接收管
- 限流电阻：为红外发射管提供合适的驱动电流（通常使用220Ω-470Ω）
- 上拉电阻：为接收管输出提供上拉（通常使用4.7kΩ-10kΩ）
- LED指示灯：用于指示传感器检测状态

（2）焊接步骤

1. 准备万用板，规划电路布局，确保传感器间距合理（约2cm）。
2. 将5个TCRT5000传感器按照从左到右的顺序固定在万用板上，注意传感器方向一致。
3. 为每个传感器的红外发射管串联限流电阻（220Ω），连接到5V电源。
4. 为每个传感器的接收管输出端连接上拉电阻（4.7kΩ）到5V，输出信号通过下拉电阻（10kΩ）连接到地。
5. 在每个传感器输出端连接LED指示灯，用于直观显示传感器状态。
6. 将所有传感器的VCC端连接到5V电源，GND端连接到地。
7. 将5个传感器的输出信号线分别连接到单片机的P3.2、P3.3、P3.4、P3.5、P3.6引脚。
8. 焊接完成后，使用万用表检查电路的通断情况，确保无短路、开路。

（3）电路检查

1. 检查所有焊点是否牢固，无虚焊、假焊。
2. 检查电阻值是否正确，使用万用表测量关键节点的电阻值。
3. 检查电源连接是否正确，确保5V电源稳定。
4. 检查传感器方向是否正确，确保发射管和接收管的位置正确。

2、分析和理解循迹模块电路的原理，针对出现的问题进行排查和解决

（1）循迹模块电路原理分析

TCRT5000循迹模块电路的工作原理：

1. 红外发射部分：
   - 红外发射管（LED）通过限流电阻连接到5V电源，发出红外光。
   - 限流电阻的作用是限制通过发射管的电流，防止过流损坏。
   - 典型工作电流为20mA左右，限流电阻值计算：R = (5V - 1.2V) / 20mA ≈ 190Ω，实际使用220Ω。

2. 红外接收部分：
   - 红外接收管（光敏三极管）接收反射回来的红外光。
   - 当传感器位于白色地面上时，反射光较强，接收管导通，输出低电平（接近0V）。
   - 当传感器位于黑色轨道上时，反射光较弱，接收管截止，输出高电平（接近5V）。
   - 上拉电阻确保输出信号的电平稳定。

3. 信号处理：
   - 传感器输出信号通过上拉电阻连接到5V，通过下拉电阻连接到地。
   - 当检测到白色地面时，输出低电平；检测到黑色轨道时，输出高电平。
   - 输出信号连接到单片机的I/O口，通过程序读取传感器状态。

（2）问题排查与解决

在调试过程中遇到的主要问题及解决方法：

问题1：传感器输出信号不稳定，出现抖动现象

现象：传感器在检测同一位置时，输出信号在高电平和低电平之间频繁切换。

原因分析：
- 传感器距离地面高度不合适，导致反射光强度不稳定。
- 环境光干扰（如日光灯、自然光）影响传感器工作。
- 电源电压不稳定，导致传感器工作异常。
- 上拉电阻或下拉电阻值不合适。

解决方法：
- 调整传感器距离地面的高度，通常保持在1-2cm之间。
- 在传感器周围添加遮光罩，减少环境光干扰。
- 检查电源电路，确保5V电源稳定，必要时添加滤波电容。
- 调整上拉电阻值，尝试使用4.7kΩ或10kΩ，找到最佳值。
- 在程序中添加软件滤波，通过多次采样取平均值或使用延时消抖。

问题2：传感器灵敏度不够，无法准确区分白色和黑色

现象：传感器在白色地面和黑色轨道上的输出信号差异不明显。

原因分析：
- 传感器距离地面过高，导致反射光强度差异不明显。
- 限流电阻值过大，导致红外发射管发光强度不足。
- 黑色轨道反光率不够低，或白色地面不够白。

解决方法：
- 降低传感器距离地面的高度，通常调整到1cm左右。
- 减小限流电阻值，增加红外发射管的驱动电流，提高发光强度。
- 使用更黑的胶带制作轨道，或使用更白的纸张作为地面。
- 调整传感器的安装角度，使发射光能够更好地反射到接收管。

问题3：多个传感器之间相互干扰

现象：当某个传感器检测到黑线时，相邻传感器的输出也会受到影响。

原因分析：
- 传感器间距过小，导致红外光相互干扰。
- 传感器安装角度不当，导致光路交叉。

解决方法：
- 增加传感器之间的间距，通常保持在2cm以上。
- 调整传感器的安装角度，使每个传感器的光路独立。
- 在传感器之间添加隔板，防止光路交叉。

问题4：传感器输出电平与预期相反

现象：检测到白色地面时输出高电平，检测到黑色轨道时输出低电平。

原因分析：
- 电路连接错误，上拉电阻和下拉电阻接反。
- 传感器型号或电路设计不同，输出逻辑相反。

解决方法：
- 检查电路连接，确认上拉电阻和下拉电阻的连接方式。
- 在程序中取反逻辑，将读取到的传感器状态取反后再使用。
- 根据实际电路设计调整程序逻辑。

五、实验结果

电路实现结果，包括传感器照射在白色地面和黑色引导线上的实现情况

1. 传感器在白色地面上的工作情况

测试条件：将传感器模块放置在白色硬纸板上，距离地面约1.5cm。

测试结果：
- 传感器1（最左侧）：输出低电平（0V），LED指示灯点亮，表示检测到白色地面。
- 传感器2（左侧）：输出低电平（0V），LED指示灯点亮。
- 传感器3（中间）：输出低电平（0V），LED指示灯点亮。
- 传感器4（右侧）：输出低电平（0V），LED指示灯点亮。
- 传感器5（最右侧）：输出低电平（0V），LED指示灯点亮。

所有传感器在白色地面上均能稳定输出低电平，响应时间小于10ms，工作稳定可靠。

2. 传感器在黑色引导线上的工作情况

测试条件：将传感器模块放置在黑色电工胶带上，距离地面约1.5cm。

测试结果：
- 当传感器正对黑色胶带时：输出高电平（5V），LED指示灯熄灭，表示检测到黑色轨道。
- 当传感器部分覆盖黑色胶带时：输出电平根据覆盖面积在高低电平之间变化。
- 当传感器完全在白色地面上时：输出低电平（0V），LED指示灯点亮。

传感器能够准确区分黑色引导线和白色地面，输出信号稳定，满足循迹功能的要求。

3. 传感器阵列整体测试

测试条件：制作一条宽度约2cm的黑色引导线，将5个传感器组成的传感器阵列放置在引导线上方。

测试结果：
- 当中间传感器（传感器3）正对黑线时：传感器3输出高电平，其他传感器输出低电平，表示小车在轨道中央。
- 当黑线偏左时：左侧传感器（传感器1或2）输出高电平，右侧传感器输出低电平，表示小车偏右，需要左转。
- 当黑线偏右时：右侧传感器（传感器4或5）输出高电平，左侧传感器输出低电平，表示小车偏左，需要右转。

传感器阵列能够准确判断小车相对于引导线的位置，为循迹控制提供了可靠的位置信息。

六、实验总结

1、小组总结

本次实验成功完成了循迹模块的硬件电路焊接与调试。在实验过程中，我们深入理解了TCRT5000红外传感器的工作原理，掌握了循迹模块电路的设计与实现方法。

通过本次实验，我们学会了如何设计和焊接传感器电路，如何调试和优化传感器的工作参数，如何解决实际调试过程中遇到的各种问题。在解决传感器信号不稳定、灵敏度不够等问题时，我们通过调整传感器高度、优化电路参数、添加软件滤波等方法，最终实现了稳定的循迹功能。

本次实验不仅提升了我们的硬件焊接和调试能力，也增强了我们分析和解决实际问题的能力。我们认识到，在实际工程中，理论设计与实际实现之间往往存在差异，需要通过不断的调试和优化来达到最佳效果。

2、个人总结

- 张旭阳：在本次实验中，我主要负责硬件电路的焊接和调试。通过实际动手操作，我对循迹模块电路的工作原理有了更深入的理解。在焊接过程中，我学会了如何规划电路布局，如何选择合适的元件参数，如何确保焊接质量。在调试过程中，我遇到了传感器信号不稳定、灵敏度不够等问题，通过反复调试和优化，最终解决了这些问题。这次实验让我深刻体会到硬件调试需要耐心和细致，每一个细节都可能影响最终效果。

- 高佳愿：我主要负责传感器信号测试和问题排查。在测试过程中，我系统地记录了传感器在不同条件下的工作状态，分析了各种问题的原因，并提出了解决方案。通过本次实验，我学会了如何使用万用表测试电路，如何分析电路故障，如何优化电路参数。同时，我也认识到软件滤波在硬件调试中的重要性，通过添加软件滤波，有效解决了传感器信号抖动的问题。这次实验提升了我的测试和调试能力，也增强了我解决实际问题的能力。

思考题

1、简述循迹模块电路的原理

循迹模块电路基于TCRT5000红外反射式传感器，其工作原理如下：

（1）红外发射部分：
- TCRT5000传感器内部包含一个红外发射管（LED）和一个红外接收管（光敏三极管）。
- 红外发射管通过限流电阻连接到5V电源，发出红外光照射到地面。
- 限流电阻的作用是限制通过发射管的电流，防止过流损坏，典型值为220Ω-470Ω。

（2）红外接收部分：
- 红外接收管接收从地面反射回来的红外光。
- 当传感器位于白色地面上时，反射光较强，接收管导通，输出低电平（接近0V）。
- 当传感器位于黑色轨道上时，反射光较弱，接收管截止，输出高电平（接近5V）。

（3）信号处理：
- 传感器输出信号通过上拉电阻连接到5V，确保输出电平稳定。
- 输出信号连接到单片机的I/O口，通过程序读取传感器状态。
- 多个传感器组成传感器阵列，可以判断小车相对于轨道的相对位置。

（4）循迹控制：
- 根据传感器阵列的输出状态，判断小车位置。
- 当中间传感器检测到黑线时，小车在轨道中央，直行。
- 当左侧传感器检测到黑线时，小车偏右，需要左转。
- 当右侧传感器检测到黑线时，小车偏左，需要右转。

2、简述在调试循迹模块过程中遇到的问题及其解决方法

在调试循迹模块过程中，我们主要遇到了以下问题：

（1）传感器输出信号不稳定，出现抖动现象

问题现象：传感器在检测同一位置时，输出信号在高电平和低电平之间频繁切换。

解决方法：
- 调整传感器距离地面的高度，通常保持在1-2cm之间。
- 在传感器周围添加遮光罩，减少环境光干扰。
- 检查电源电路，确保5V电源稳定，添加滤波电容。
- 调整上拉电阻值，找到最佳值（通常4.7kΩ-10kΩ）。
- 在程序中添加软件滤波，通过多次采样取平均值或使用延时消抖。

（2）传感器灵敏度不够，无法准确区分白色和黑色

问题现象：传感器在白色地面和黑色轨道上的输出信号差异不明显。

解决方法：
- 降低传感器距离地面的高度，通常调整到1cm左右。
- 减小限流电阻值，增加红外发射管的驱动电流，提高发光强度。
- 使用更黑的胶带制作轨道，或使用更白的纸张作为地面。
- 调整传感器的安装角度，使发射光能够更好地反射到接收管。

（3）多个传感器之间相互干扰

问题现象：当某个传感器检测到黑线时，相邻传感器的输出也会受到影响。

解决方法：
- 增加传感器之间的间距，通常保持在2cm以上。
- 调整传感器的安装角度，使每个传感器的光路独立。
- 在传感器之间添加隔板，防止光路交叉。

（4）传感器输出电平与预期相反

问题现象：检测到白色地面时输出高电平，检测到黑色轨道时输出低电平。

解决方法：
- 检查电路连接，确认上拉电阻和下拉电阻的连接方式。
- 在程序中取反逻辑，将读取到的传感器状态取反后再使用。
- 根据实际电路设计调整程序逻辑。

通过以上问题的排查和解决，我们最终实现了稳定可靠的循迹功能，传感器能够准确区分白色地面和黑色引导线，为后续的循迹控制提供了可靠的基础。

